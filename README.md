**Желаемая архитектура

────────────────────────────────────────────────────────
      [1] UI (только события)
────────────────────────────────────────────────────────
  • пользователь изменил настройки
  • ввёл параметры
  • выбрал ячейку
  • нажал кнопку
  ↓
────────────────────────────────────────────────────────
      ГОРЛЫШКО №1 (фиксирование состояния)
────────────────────────────────────────────────────────
PlanetCore::applyInput()
  • обновляет настройки
  • повышает sceneVersion
  • делает snapshot модели
  • подготавливает параметры для задач
  ↓
PlanetCore::scheduleAsyncTasks(snapshot, version)
  ↓
────────────────────────────────────────────────────────
      [2] ASYNC+PARALLEL ЗАДАЧИ
────────────────────────────────────────────────────────
AsyncComputeLayer:
  • генерирует данные
  • parallel_for внутри
  • GPU compute внутри
  • возвращает (result, version)
  ↓
────────────────────────────────────────────────────────
      ГОРЛЫШКО №2 (sync commit → main thread)
────────────────────────────────────────────────────────
PlanetCore::commitAsyncResult(result, version)
  • проверяет version
  • обновляет сцену
  • готовит RenderGraph
  ↓
────────────────────────────────────────────────────────
      [3] SYNC RENDER (строго)
────────────────────────────────────────────────────────
renderer.render(graph)
────────────────────────────────────────────────────────
